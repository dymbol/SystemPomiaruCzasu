{% extends 'base.html' %}
{% load spc_extratags %}
{% load static from staticfiles %}
{% block primary %}
<div class="row">
    <section id="main-content">
      <section class="wrapper">
      <div class="col-lg-12">


                  <ul class="nav nav-pills mb-3" role="tablist">
                      <li class="nav-item">
                        <a class="nav-link active" id="general-tab" data-toggle="pill" href="#general-pills" role="tab" aria-controls="general-pills" aria-selected="true">Klasyfikacja generalna</a>
                      </li>
                      {% for el in classes_laps%}
                        {% for klasa in el %}
                            <li class="nav-item">
                                <a class="nav-link active " id="{{klasa|slugify}}-tab" data-toggle="pill" href="#{{klasa|slugify}}-pills" role="tab" aria-controls="{{klasa|slugify}}-pills" aria-selected="false">{{klasa}}</a>
                              </li>

                        {% endfor %}


                      {% endfor  %}

                  </ul>
                    <div></div>
                  <div class="tab-content" id="myTabContent">

                      {% for el in classes_laps %}
                            {% for klas_name, data in el.items %}
                                   <div class="tab-pane fade" id="{{klas_name|slugify}}-pills" role="tabpanel" aria-labelledby="{{klas_name|slugify}}-tab">
                                   <table class="table table-striped table-advance table-hover">
                                      <tbody>
                                      <tr>
                                        <th>Pozycja</th>
                                        <th>Wynik taryfa </th>
                                        <th><i class="icon_profile"></i>Team</th>
                                          <th> Numer startowy</th>
                                          <th> Taryfa</th>
                                          <th> Kara</th>
                                          <th> Najlepszy Wynik [min:s:ms]</th>
                                          <th> Najlepszy Wynik+kara [min:s:ms]</th>
                                          <th> Wynik końcowy [min:s:ms]</th>
                                      </tr>
                                            {% for el2 in data %}
                                                <tr>
                                                <td>{{forloop.counter}}</td>
                                                {% for label, value in el2.items %}
                                                    {% if label != "LAP_ID" %}
                                                            {% if label == "taryfa" %}
                                                                {% if value == True %}
                                                                    <td><span class="badge badge-danger">Tak</span></td>
                                                                {% else %}
                                                                    <td>-</td>
                                                                {% endif %}
                                                            {% elif label == "TEAM_ID" %}
                                                                    <td>{{value|GetTeamName}}</td>
                                                            {% elif label == "fee" %}
                                                                <td>{{value}} s</td>
                                                            {% elif label == "MIN_RESULT" %}
                                                                <td>{{value|msToHumanTime}}</td>
                                                            {% elif label == "RESULT_WITH_FEE" %}
                                                                <td>{{value|msToHumanTime}}</td>
                                                            {% elif label == "OVERALL_TIME" %}
                                                                <td>{{value|msToHumanTime}}</td>
                                                            {% elif label == "TARYFA_TIME" %}
                                                                {% if value == 0.0 %}
                                                                    <td>-</td>
                                                                {% else %}
                                                                    <td>{{value}} ms</td>
                                                                {% endif %}
                                                            {% else %}
                                                                <td>{{value}}</td>
                                                            {% endif %}
                                                    {% endif %}
                                                {% endfor %}
                                                </tr>
                                            {% endfor %}
                                            </tbody>
                                           </table>
                                          </div>
                                        {% endfor %}
                                  {% endfor %}
                      <div class="tab-pane fade" id="general-pills" role="tabpanel" aria-labelledby="general-tab">
                       <table class="table table-striped table-advance table-hover">
                          <tbody>
                          <tr>
                                        <th>Pozycja</th>
                            <th>Wynik taryfa </th>
                            <th><i class="icon_profile"></i>Team</th>

                              {% for race_lap in race_laps%}
                                <th>{{race_lap.name}}</th>
                              {% endfor%}
                              <th></i> Numer startowy</th>
                              <th></i> Taryfa</th>
                              <th></i> Kara</th>
                              <th></i> Najlepszy  Wynik [min:s:ms]</th>
                              <th></i> Najlepszy  Wynik+kara [min:s:ms]</th>
                              <th></i> Wynik końcowy [min:s:ms]</th>
                          </tr>
                          {% for lap in general_laps %}

                            <tr>
                            <td>{{forloop.counter}}</td>
                                {% for label, value in lap.items %}

                                    {% if label != "LAP_ID" %}

                                            {% if label == "taryfa" %}
                                                {% if value == True %}
                                                    <td><span class="badge badge-danger">Tak</span></td>
                                                {% else %}
                                                    <td>-</td>
                                                {% endif %}
                                            {% elif label == "TEAM_ID" %}
                                                    <td>{{value|GetTeamName}}</td>
                                                            {% for element in value|GetTeamLaps%}
                                                            <td >
                                                                {{element}}
                                                            </td>
                                                            {% endfor %}



                                            {% elif label == "fee" %}
                                                <td>{{value}} s</td>
                                            {% elif label == "MIN_RESULT" %}
                                                <td>{{value|msToHumanTime}}</td>
                                            {% elif label == "RESULT_WITH_FEE" %}
                                                <td>{{value|msToHumanTime}}</td>
                                            {% elif label == "OVERALL_TIME" %}
                                                <td>{{value|msToHumanTime}}</td>
                                            {% elif label == "TARYFA_TIME" %}
                                                {% if value == 0.0 %}
                                                    <td>-</td>
                                                {% else %}
                                                    <td>{{value|msToHumanTime}}</td>
                                                {% endif %}
                                            {% else %}
                                                <td>{{value}}</td>
                                            {% endif %}



                                    {% endif %}
                                {% endfor%}
                            </tr>
                          {% endfor%}
                          </tbody>
                       </table>
                      </div>
                  </div>







      </div>
      </section>
        </section>

    </div>
{% endblock %}