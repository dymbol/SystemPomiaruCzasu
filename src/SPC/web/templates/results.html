{% extends 'base.html' %}
{% load spc_extratags %}
{% load static from staticfiles %}
{% block primary %}
<div class="row">
    <section id="main-content">
      <section class="wrapper">
      <div class="col-lg-12">


                  <ul class="nav nav-pills mb-3" role="tablist">
                      <li class="nav-item active">
                        <a class="nav-link active" id="general-tab" data-toggle="pill" href="#general-pills" role="tab" aria-controls="general-pills" aria-selected="true">Klasyfikacja generalna</a>
                      </li>
                      {% for el in classes_laps%}
                        {% for klasa in el %}
                            <li class="nav-item">
                                <a class="nav-link  " id="{{klasa|slugify}}-tab" data-toggle="pill" href="#{{klasa|slugify}}-pills" role="tab" aria-controls="{{klasa|slugify}}-pills" aria-selected="false">{{klasa}}</a>
                              </li>

                        {% endfor %}


                      {% endfor  %}

                  </ul>
                    <div></div>
                  <div class="tab-content" id="myTabContent">

                      {% for el in classes_laps %}
                            {% for klas_name, data in el.items %}
                                   <div class="tab-pane fade" id="{{klas_name|slugify}}-pills" role="tabpanel" aria-labelledby="{{klas_name|slugify}}-tab">
                                   <table class="table table-striped table-advance table-hover">
                                      <tbody>
                                      <tr>
                                        <th>Pozycja</th>
                                            <th></i> Numer startowy</th>
                                            <th><i class="icon_profile"></i>Team</th>
                                            {% for race_lap in race_laps%}
                                                <th>{{race_lap.name}}</th>
                                            {% endfor%}
                                            <th></i> Najlepszy  Wynik [min:s:ms]</th>
                                      </tr>
                                            {% for el2 in data %}
                                                <tr>
                                                <td>{{forloop.counter}}</td>
                                                {% for label, value in el2.items %}
                                                    {% if label != "LAP_ID" %}
                                                         {% if label == "start_no" %}
                                                            <td>{{value}}</td>
                                                        {% elif label == "TEAM_ID" %}
                                                            <td>{{value|GetTeamName}}</td>
                                                            {% for element in value|GetTeamLaps%}
                                                                <td>
                                                                {{element}}
                                                                </td>
                                                            {% endfor %}
                                                        {% elif label == "MIN_RESULT" %}
                                                                <td>{{value|msToHumanTime}}</td>
                                                        {% elif label == "OVERALL_TIME" %}
                                                                <!-- ommit this value because it's the same as MIN_RESULT -->
                                                        {% endif %}
                                                    {% endif %}
                                                {% endfor %}
                                                </tr>
                                            {% endfor %}
                                            </tbody>
                                           </table>
                                          </div>
                                        {% endfor %}
                                  {% endfor %}
                      <div class="tab-pane fade in active" id="general-pills" role="tabpanel" aria-labelledby="general-tab">
                       <table class="table table-striped table-advance table-hover">
                          <tbody>
                          <tr>
                            <th>Pozycja</th>
                            <th></i> Numer startowy</th>
                            <th><i class="icon_profile"></i>Team</th>
                            {% for race_lap in race_laps%}
                                <th>{{race_lap.name}}</th>
                            {% endfor%}
                            <th></i> Najlepszy  Wynik [min:s:ms]</th>
                          </tr>
                          {% for lap in general_laps %}

                            <tr>
                            <td>{{forloop.counter}}</td>
                                {% for label, value in lap.items %}
                                    {% if label != "LAP_ID" %}
                                        {% if label == "start_no" %}
                                            <td>{{value}}</td>
                                        {% elif label == "TEAM_ID" %}
                                            <td>{{value|GetTeamName}}</td>
                                            {% for element in value|GetTeamLaps%}
                                                <td>
                                                {{element}}
                                                </td>
                                            {% endfor %}
                                        {% elif label == "MIN_RESULT" %}
                                                <td>{{value|msToHumanTime}}</td>
                                        {% elif label == "OVERALL_TIME" %}
                                                <!-- ommit this value because it's the same as MIN_RESULT -->
                                        {% endif %}
                                    {% endif %}
                                {% endfor%}
                            </tr>
                          {% endfor%}
                          </tbody>
                       </table>
                      </div>
                  </div>







      </div>
      </section>
        </section>

    </div>
{% endblock %}